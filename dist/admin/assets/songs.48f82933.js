import{ag as f,ak as m,W as d}from"./index.1fb80485.js";import{a as u}from"./artists.96000a2f.js";const c="song",n=f({list:[],detail:{_id:null,title:"",artist:null,featuring:null,lyric:""},pagination:{rowsNumber:0,search:"",rowsPerPage:15},getList:h,getDetail:y,onSubmit:p,search_artist:w,columns:[{label:"Title",name:"title",field:t=>t.title,align:"left"},{label:"Artist",name:"artist",field:t=>{var a,e;return(e=(a=t.artist)==null?void 0:a.name)!=null?e:"N/A"},align:"left"},{name:"actions",align:"right"}]});async function h(t){var a,e,i;try{let r={limit:n.pagination.rowsPerPage,page:n.pagination.page};t!=null&&t.pagination&&(r.limit=t.pagination.rowsPerPage,r.page=t.pagination.page),n.pagination.search&&(r.search=n.pagination.search);const s=await m.get(c,{params:r});n.list=s.data.data,n.pagination.rowsNumber=s.data.total}catch(r){console.error(r.message),Notify.create((i=(e=(a=r.response)==null?void 0:a.data)==null?void 0:e.message)!=null?i:"Server error")}}async function p(){var t,a,e;try{const{q:i,route:r,router:s}=d,{detail:o}=n,l=o._id?`${c}/${o._id}`:c,g=o._id?"put":"post",v=await m[g](l,o);s.push({name:"songs"})}catch(i){console.error(i.message),Notify.create((e=(a=(t=i.response)==null?void 0:t.data)==null?void 0:a.message)!=null?e:"Server error")}}async function y(t,a){var s,o,l;const{q:e,route:i,router:r}=d;try{e.loading.show();const g=await m.get(`${c}/${a!=null?a:i.params.id}`);n.detail=g.data,e.loading.hide()}catch(g){e.loading.hide(),Notify.create((l=(o=(s=g.response)==null?void 0:s.data)==null?void 0:o.message)!=null?l:"Server error")}}async function w(t,a){a(()=>{var e,i,r;try{t.length<2?u.getList():u.getList({pagination:{limit:20,search:t}})}catch(s){Notify.create((r=(i=(e=s.response)==null?void 0:e.data)==null?void 0:i.message)!=null?r:"Server error")}})}export{n as s};
