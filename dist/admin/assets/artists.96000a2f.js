import{ag as h,ak as c,al as g,W as d}from"./index.1fb80485.js";const l="artist",o=h({list:[],detail:{_id:null,name:"",sex:"Male",pic:null,isDraft:!0,socials:[{name:"Facebook",link:""},{name:"Instagram",link:""},{name:"Twitter",link:""}]},pagination:{limit:15,rowsNumber:0},getList:p,getDetail:w,onSubmit:b,columns:[{label:"Name",name:"name",field:a=>a.name,align:"left"},{label:"Gender",name:"sex",field:a=>a.sex,align:"left"},{label:"Status",name:"isDraft",field:a=>a.isDraft?"Draft":"Confirmed",align:"left"},{name:"actions",align:"right"}]});async function p(a){var n,r,i,s;try{let e={limit:o.pagination.limit,page:o.pagination.page};a!=null&&a.pagination&&(e.limit=a.pagination.rowsPerPage,e.page=a.pagination.page,(n=a.pagination)!=null&&n.search&&(e.search=a.pagination.search));const t=await c.get(l,{params:e});o.list=t.data.data,o.pagination.rowsNumber=t.data.total}catch(e){console.error(e.message),g.create((s=(i=(r=e.response)==null?void 0:r.data)==null?void 0:i.message)!=null?s:"Server error")}}async function b(){var a,n,r;try{const{q:i,route:s,router:e}=d,{detail:t}=o,f=t._id?`${l}/${t._id}`:l,u=t._id?"put":"post";t.socials.forEach((m,y)=>{m.link||(m.link="N/A")});const k=await c[u](f,t);e.push({name:"artists"})}catch(i){console.error(i.message),g.create((r=(n=(a=i.response)==null?void 0:a.data)==null?void 0:n.message)!=null?r:"Server error")}}async function w(){var i,s,e;const{q:a,route:n,router:r}=d;try{a.loading.show();const t=await c.get(`${l}/${n.params.id}`);o.detail=t.data,a.loading.hide()}catch(t){a.loading.hide(),g.create((e=(s=(i=t.response)==null?void 0:i.data)==null?void 0:s.message)!=null?e:"Server error")}}export{o as a};
